<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta content="耘存科技" http-equiv="keywords">
	<meta name="description" content="耘存科技">
	<meta name="viewport" content="width=device-width,user-scalable=no, initial-scale=1">
	<!-- favicons -->
	<!--	<link rel="apple-touch-icon" href="./images/favicon-apple.png">-->
	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="http://cdn.bootstrapmb.com/bootstrap/4.1.3/css/bootstrap.min.css">
	<!-- Material design icons CSS -->
	<!--	<link rel="stylesheet" href="./css/static/material-icons.css">-->
	<!-- aniamte CSS -->
	<!--	<link rel="stylesheet" href="./css/static/animate.css">-->
	<!-- swiper slider CSS -->
	<!--	<link rel="stylesheet" href="./css/static/swiper.min.css">-->
	<!-- app CSS -->
	<link id="theme" rel="stylesheet" href="./css/static/purplesidebar.css" type="text/css">
	<!-- icon -->
	<title>手机号登录</title>
	<style>
		* {
			margin: 0;
			padding: 0;
		}

		body {
			/* background-color: #F0F0F0; */
			background-color: #fff;
		}

		li {
			list-style-type: none;
		}

		/*!*menubox菜单*!*/
		.menubox {
			background-color: #0083c3;
			position: relative;
			position: fixed;
			left: 0;
			bottom: 0;
			z-index: 999;
			width: 100%;
			padding: 6px 0;
		}

		.menubox ul li {
			float: left;
			width: 25%;
			text-align: center;
		}

		.menubox ul li i {
			display: block;
			margin: 0 auto;
			width: 1.5rem;
			height: 1.5rem;
		}

		.menubox ul li i img {
			display: none;
			margin: 0 auto;
			width: 1.5rem;
		}

		.menubox ul li i img:first-child {
			display: block;
		}

		.menubox ul li span {
			display: block;
			font-size: 0.9rem;
			color: #fff;
			line-height: 150%;
		}

		.menubox ul li.cur i img:first-child {
			display: none;
		}

		.menubox ul li.cur i img:last-child {
			display: block;
		}

		.menubox ul li.cur span {
			color: #afe4ff;
		}

		.menubox dl {
			position: absolute;
			right: 0;
			width: 36%;
			background-color: #0083c3;
			text-align: center;
			padding: 1% 0;
			border: rgba(255, 255, 255, .3) solid 1px;
			border-bottom: 0;
			display: none;
			border-radius: 4px 4px 0 0;
			overflow: hidden;
		}

		.menubox dl dd {
			line-height: 1.5rem;
			border-top: rgba(255, 255, 255, .3) solid 1px;
			display: flex;
			justify-content: center;
			align-items: center;
			margin-bottom: 0;
			height: 40px;
		}

		.menubox dl dd:first-child {
			border: 0;
		}

		.menubox dl a {
			display: block;
			color: #fff;
			font-size: 1rem;
		}

		.menubox dl a:active {
			color: #afe4ff;
		}

		.top_bg {
			position: fixed;
			z-index: 999;
			top: 0;
			left: 0;
			width: 100%;
			/* background-color: #fff; */
			background-color: #0083c3;
			padding: 1.1rem 3%;
		}

		.top_logo {
			float: left;
			width: 80%;
			height: 1.3rem;
			position: relative;
		}

		.top_logo img {
			display: block;
			max-width: 100%;
			max-height: 2.8rem;
			position: absolute;
			left: -10px;
			top: 50%;
			border: none;
			transform: translate(0, -50%);
			-o-transform: translate(0, -50%);
			-ms-transform: translate(0, -50%);
			-moz-transform: translate(0, -50%);
			-webkit-transform: translate(0, -50%);
		}

		/* -------------------------------------- */
		.main {
			background-color: #FFFFFF;
			margin: 7em auto;
			border-radius: 1.5em;
			box-shadow: 0px 11px 35px 2px rgba(0, 0, 0, 0.14);
		}

		.btnlog {
			width: 33%;
			margin-left: 1.5rem;
			margin-right: 1.5rem;
		}

		.bgse {
			background-color: #0083c3;
			border-color: #0083c3;
		}

		.custom-checkbox .letme:checked~.custom-control-label::before {
			background-color: #0083c3;
		}
	</style>


</head>

<body class="fixed-header sidebar-right-close sidebar-left-close">
	<div class="top_bg">
		<div class="top_main fix">
			<div class="top_logo">
				<a href="index.html"><img src="images/yclogo2.png" /></a>
			</div>
			<div style="float:right">
				<span class="go_back_wrap" style="color: #fff;"> < 返回 </span>
			</div>
		</div>
	</div>

	<!-- sidebar left ends -->
	<!-- content page -->
	<div class="container-fluid h-100 h-sm-auto">
		<div class="row h-100 h-sm-auto">
			<div class="col-12 col-md-6 h-md-100  h-sm-auto order-2 order-md-1">
				<div class="row align-items-center h-100 h-sm-auto">
					<div class="col-12 col-md-10 col-lg-8 col-xl-6 mx-auto main">
						<p style="font-family: cursive; font-size: 24px;">请输入您的手机号</p>
						<div class="card mb-2">
							<div class="card-body p-0" id="name_data">
								<label for="regPhone" class="sr-only">手机号</label>
								<input type="text" id="regPhone" oninput="preSql(this)"
									class="form-control form-control-lg border-0 text-center" placeholder="手机号"
									style="font-family: cursive; font-size: 18px;">
								<span id="code"></span>
								<hr class="my-0">
								<div class="input">
									<!--
									<span style="position: relative;">
										<img src="./images/static/code.png" alt="" class="code">
									</span>
									-->
									<input type="text" id="yanZM" oninput="preSql(this)"
										   class="form-control text-center form-control-lg border-0" placeholder="输入验证码"
										   onkeyup="this.value=this.value.replace(/[^0-9]/g,'');"
										   style="font-family: cursive;">
									<span id="msgYanZM"></span>
									<input type="button" class="btn btn-outline-primary c-333 text-c js-code btncode"
										   value="获取验证码" id="sendYzm" style="width:100%;font-family: cursive;border-color: #fff">
								</div>
							</div>
						</div>
						<div class="my-4 row">
							<div class="col-6 col-md">
								<div class="custom-control custom-checkbox">
									<input type="checkbox" class="custom-control-input letme" id="customCheck1" checked>
									<label class="custom-control-label" for="customCheck1"
										style="font-family: cursive; font-size: 16px;">记住我</label>
								</div>
							</div>
						</div>
						<div class="text-left mb-4" style="display: flex">
							<a type="submit" class="btn btn-primary pink-gradient btnlog bgse" onclick="checkLogin()"
								id="name_1" style="font-family: cursive; font-size: 20px;width: 100%">登录</a>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>



	<!-- 底部菜单 -->
	<div class="menubox">
		<ul class="fix" style="display: flex;margin-bottom: 0">
			<li>
				<a href="index.html">
					<i>
						<img src="images/menu_icon01.png" alt="首页" />
						<img src="images/menu_icon01_1.png" alt="首页" />
					</i>
					<span>首页</span>
				</a>
			</li>
			<li>
				<a href="quotation.html">
					<i>
						<img src="images/menu_icon05.png" alt="行情" />
<!--						<img src="images/menu_icon01_1.png" alt="首页" />-->
					</i>
					<span>行情</span>
				</a>
			</li>
			<li>
				<a href="video.html">
					<i>
						<img src="images/static/file_menu_icon.png" alt="文件中心" />
						<img src="images/static/file_menu_icon.png" alt="文件中心" />
					</i>
					<span>文件中心</span>
				</a>
			</li>
			<li>
				<a href="search.html">
					<i>
						<img src="images/icon_search2.png" alt="搜索" />
						<img src="images/icon_search2.png" alt="搜索" />
					</i>
					<span>搜索</span>
				</a>
			</li>
			<li class="menubtn">
				<i>
					<img src="images/menu_icon04.png" alt="菜单" />
					<img src="images/menu_icon04_1.png" alt="菜单" />
				</i>
				<span>菜单</span>
			</li>
		</ul>
		<!-- 菜单导航 -->
		<span class="menu_panel"></span>
		<!--
		<dl class="menu">
			<dd><a href="login.html">登录</a></dd>
			<dd><a href="register.html">注册</a></dd>
			<dd><a href="video.html">视频中心</a></dd>
			<dd><a href="about.html">关于我们</a></dd>
			<dd><a href="contact.html">联系我们</a></dd>
		</dl>
		-->
	</div>

	<!-- content page ends -->
	<!-- Optional JavaScript -->
	<!-- jQuery first, then Popper.js, then Bootstrap JS -->
	<script src="./js/static/jquery-3.2.1.min.js"></script>
	<script src="./js/static/popper.min.js"></script>
	<script src="http://cdn.bootstrapmb.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	<!-- Cookie jquery file -->
	<script src="./js/static/jquery.cookie.js"></script>
	<!-- swiper slider jquery file -->
	<script src="./js/static/swiper.min.js"></script>
	<!-- Application main common jquery file -->
	<script src="./js/static/main.js"></script>
	<!-- page specific script -->
	<!-- 验证码 -->
	<script src="./js/static/verification_code.js"></script>
	<!--简单弹出框-->
	<script src="./js/static/showTip.js"></script>
	<!-- 过滤器SQL -->
	<script src="./js/static/filterSQL.js"></script>
	<!-- 底部公共导航js -->
	<!-- <script type="text/javascript" src="js/public.js"></script> -->
	<script>
		$(".menubox dl").css("bottom", "44px")
	</script>
	<script>
		let uuida = "";
		function uuid() {
			var s = [];
			var hexDigits = "0123456789abcdef";
			for (var i = 0; i < 36; i++) {
				s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
			}
			s[14] = "4"; // bits 12-15 of the time_hi_and_version field to 0010
			s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1); // bits 6-7 of the clock_seq_hi_and_reserved to 01
			s[8] = s[13] = s[18] = s[23] = "-";
			uuida = s.join("");
		}
		var verificationCode = '';
		// 点击登录，检查登陆成功与否
		function checkLogin() {
			var codeVal = $('#yanZM').val()
			//获取输入的手机号
			var regPhone = document.getElementById("regPhone");
			if (codeVal == null || codeVal == '') {
				ShowFailure('验证码不能为空 !')
				return false;
			} else if (verificationCode == codeVal) {
				if (regPhone.value.length !== 11) {
					ShowFailure('手机号是11个数字 !')
					return false;
				} else {
					$.ajax({
						type: "get",
						dataType: 'json',
						contentType: 'application/json',
						url: "http://61.147.123.84:9000/v1/loginbyphone",
						data: {
							phone: $("#regPhone").val()
						},
						success: function (data) {
							console.log('++++++--------', data)
							if (data.Msg == '手机号未注册，请先进行注册') {
								ShowFailure(data.Msg)
								return false
							} else if (data.Msg == 'ok') {
								ShowSuccess('登录成功')
								// 本地存储设置表示当前登录用户为普通用户
								localStorage.setItem('isLogin', '0')
								// 本地存储设置当前登录用户的用户名
								localStorage.setItem('userName', data.data.Name)
								let isAdminLogin = localStorage.getItem('isAdminLogin')
								if (isAdminLogin === '0') {
									localStorage.removeItem('isAdminLogin')
								}
								setTimeout(() => {
									window.location.href = './index.html'
								})
							}
							/*
                            if (data.msg == "用户不存在") {
                                ShowFailure("用户不存在,请注册!");
                                $("#inputEmail").val("");
                                $("#inputPassword").val("");
                            } else if (data.msg == "密码错误") {
                                ShowFailure("密码错误,请重试!");
                                $("#inputEmail").val("");
                                $("#inputPassword").val("");
                            } else if (data.msg == "该账户已登录，请重新登录") {
                                ShowFailure("该账户已登录，请重新登录");
                            } else {
                                // console.log("data",data);
                                ShowSuccess("登陆成功")
                                localStorage.obj = JSON.stringify(data);
                                localStorage.obj_power = "2";
                                setInterval(() => {
                                    window.location.href = "./index.html";
                                }, 800)
                            }
                            */
						}
					})
				}
			} else {
				ShowFailure('验证码输入错误 !')
				return false
			}
		}


		$("#regPhone").blur(function () {
			var reg1 = /^1[3|4|5|7|8|9][0-9]\d{8}$/;
			if (!reg1.test(this.value)) {  //如果当前用户输入的值 非真（不符合手机号规则）
				ShowFailure("请输入正确的手机号！")
			} else if (reg1.test(this.value)) {
				//发送验证码  发起ajax请求,后台拦截这个请求
				$("#sendYzm").click(function () {
					var tel = $("#regPhone").val();
					$.ajax({
						url: "http://61.147.123.84:9000/v1/identifycode",
						type: "GET",
						dataType: 'json',
						async: false,
						data: {
							phone: tel
						},
						success: function (data) {
							console.log('::::::::::-----------', data)
							verificationCode = data.Msg
						}
					})
				})
			}

		})

		$('.menubtn').on('click', function () {
			$('.menu').css('bottom', '41px')
		})
		$('.go_back_wrap').on('click',function () { // 返回
			window.history.go(-1)
		})
	</script>
	<script>
		$(function () {
			$('.menu_panel').load('./common/menu.html')
		})
	</script>
</body>

</html>