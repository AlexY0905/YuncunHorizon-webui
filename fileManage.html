<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta content="耘存科技" http-equiv="keywords">
    <meta name="description" content="耘存科技">
    <meta name="viewport" content="width=device-width,user-scalable=no, initial-scale=1">
    <title>文件管理</title>
    <!-- css -->
    <link rel="stylesheet" type="text/css" href="css/index.css">
    <!--内容动画样式库-->
    <!-- js -->
    <script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
    <style>
        .fold_panel{margin:10px auto; width:94%; height: auto;}
        .fold_panel .user_item {
            margin-bottom: 5px;
        }
        .Collapsing {
            width: 100%;
            height: 35px;
            cursor: pointer;
            border-bottom: 1px solid white;
            /*background-repeat: no-repeat;*/
            /*background-position: center right no-repeat;*/
            /*background-image: url(images/jiantou);*/
            background-color: #FFFFFF;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            padding: 0 10px;
            box-shadow: 0 2px 2px rgba(10, 16, 20, .24), 0 0 2px rgba(10, 16, 20, .12);
        }
        .Collapsing div {
            display: flex;
            align-items: center;
        }
        .Collapsing span {
            font-size: 16px;
            margin-left: 5px;
            color: #0083c3;
        }
        /*.Collapsing .arrow {*/
        /*    transform: rotate(90deg);*/
        /*}*/
        .coll_body {
            display: none;
            background: #fff;
            box-sizing: border-box;
            padding: 10px;
            border-top: 1px solid #0083c3;
        }
        .coll_body div {
            /*margin-bottom: 10px;*/
            line-height: 35px;
            font-size: 16px;
            color: #337ab7;
            border-bottom: 1px dashed #cccccc;
        }
        /*.coll_body a{display:block; margin:10px; text-align: center; background: #ebebeb;}*/
        /*.current{background-image:url(images/pro_down.png);}*/
    </style>
</head>
<body>
<div class="top_bg">
    <div class="top_main fix">
        <div class="top_logo">
            <a href="index.html"><img src="images/yclogo.png" /></a>
        </div>
        <div class="top_search">
            <a href="search.html"><span></span></a>
        </div>
    </div>
</div>
<!-- contentbox -->
<div class="contentbox">
    <!--顶部背景图-->
    <div class="zy_banner">
        <!-- 子页banner尺寸640x240 -->
        <img src="images/space.jpg" style="width: 100%;min-height: 3rem">
    </div>
    <div class="fold_panel">
        <!--
        <div class="user_item">
            <div class="Collapsing current">
                <div>
                    <img src="./images/static/user_icon.png" style="width: 25px">
                    <span>文件名 1</span>
                </div>
                <img class="arrow" src="./images/static/jiantou_down.png" style="width: 20px">
            </div>
            <div class="coll_body">
                <div class="fileName">
                    <span>文件名</span> : <span>文件名 1</span>
                </div>
                <div class="fileType">
                    <span>文件类型</span> : <span>翻唱</span>
                </div>
                <div class="searchCount">
                    <span>搜索次数</span> : <span>100</span>
                </div>
                <div class="fee">
                    <span>花费金额</span> : <span>999999</span>
                </div>
                <div class="fileCheck">
                    <span>是否审核</span> : <span>否</span>
                </div>
                <div class="userName">
                    <span>上传用户名</span> : <span>用户 1</span>
                </div>
                <div class="credentials">
                    <span>上传的凭证说明</span> : <span>翻唱翻唱</span>
                </div>
                <div class="status">
                    <span>文件状态</span> : <span>热存储</span>
                </div>
            </div>
        </div>
        -->
    </div>
</div>

<!-- footer -->
<div class="footbox">
    <h2>
        <a href="about_item.html">Company projects</a>丨<a href="contact.html">contact us</a>
    </h2>
    <div class="txt">
        <!-- <p>CopyRight © 上海耘存科技发展有限公司</p> -->
        <p>CopyRight © Shanghai Yuncun Science and Technology Development Co., LTD</p>
        <!-- <p>联系地址:上海市静安区平型关路108创意广场品座37号5楼</p> -->
        <p>Address: 5 / F, No.37 pingxingguan Block, 108 Pingxingguan Road, Jing 'an District, Shanghai</p>
    </div>
</div>

<!-- 底部菜单 -->
<div class="menubox">
    <ul class="fix" style="display: flex">
        <li>
            <a href="index.html">
                <i>
                    <img src="images/menu_icon01.png" alt="首页" />
                    <img src="images/menu_icon01_1.png" alt="首页" />
                </i>
                <span>首页</span>
            </a>
        </li>
        <li>
            <a href="video.html">
                <i>
                    <img src="images/menu_icon02.png" alt="音频中心" />
                    <img src="images/menu_icon02_1.png" alt="音频中心" />
                </i>
                <span>音频中心</span>
            </a>
        </li>
        <li>
            <a href="search.html">
                <i>
                    <img src="images/icon_search2.png" alt="搜索" />
                    <img src="images/icon_search2.png" alt="搜索" />
                </i>
                <span>搜索</span>
            </a>
        </li>
        <li class="menubtn">
            <i>
                <img src="images/menu_icon04.png" alt="菜单" />
                <img src="images/menu_icon04_1.png" alt="菜单" />
            </i>
            <span>菜单</span>
        </li>
    </ul>
    <!-- 菜单导航 -->
    <span class="menu_panel"></span>
    <!--
    <dl class="menu">
        <dd><a href="login.html">登录</a></dd>
        <dd><a href="register.html">注册</a></dd>
        <dd><a href="video.html">音频中心</a></dd>
        <dd><a href="about.html">关于我们</a></dd>
        <dd><a href="contact.html">联系我们</a></dd>
    </dl>
    -->
</div>
<script>
    $(function () {
        $('.menu_panel').load('./common/menu.html')
    })
</script>
<script type="text/javascript">
    $(function(){

        // 获取文件列表数据
        function getUserList () {
            $.ajax({
                type: "get",
                dataType: 'json',
                contentType: 'application/json',
                url: "http://61.147.123.84:9000/v1/showallfile",
                data: {},
                success: function (result) {
                    console.log('++++++--------', result)
                    let html = ''
                    result.forEach((item, index) => {
                        if (index == 0) {
                            html += `
                            <div class="user_item">
                                <div class="Collapsing current">
                                    <div>
                                        <img src="./images/static/user_icon.png" style="width: 25px">
                                        <span>${item.Name}</span>
                                    </div>
                                    <img class="arrow" src="./images/static/jiantou_down.png" style="width: 20px">
                                </div>
                                <div class="coll_body" style="display: block">
                                    <div class="fileName">
                                        <span>文件名</span> : <span>${item.Name}</span>
                                    </div>
                                    <div class="fileType">
                                        <span>文件类型</span> : <span>${item.Type}</span>
                                    </div>
                                    <div class="searchCount">
                                        <span>搜索次数</span> : <span>${item.SearchTime}</span>
                                    </div>
                                    <div class="fee">
                                        <span>花费金额</span> : <span>${item.Fee}</span>
                                    </div>
                                    <div class="fileCheck">
                                        <span>是否审核</span> : <span>${item.Check == true ? '是' : '否'}</span>
                                    </div>
                                    <div class="userName">
                                        <span>上传用户名</span> : <span>${item.UserName}</span>
                                    </div>
                                    <div class="credentials">
                                        <span>上传的凭证说明</span> : <span>${item.Credentials}</span>
                                    </div>
                                    <div class="status">
                                        <span>文件状态</span> : <span>${item.Stage == 'hot' ? '热存储' : '冷存储'}</span>
                                    </div>
                                </div>
                            </div>
                        `
                        } else {
                            html += `
                            <div class="user_item">
                                <div class="Collapsing">
                                    <div>
                                        <img src="./images/static/user_icon.png" style="width: 25px">
                                        <span>${item.Name}</span>
                                    </div>
                                    <img class="arrow" src="./images/static/jiantou.png" style="width: 20px">
                                </div>
                                <div class="coll_body">
                                    <div class="fileName">
                                        <span>文件名</span> : <span>${item.Name}</span>
                                    </div>
                                    <div class="fileType">
                                        <span>文件类型</span> : <span>${item.Type}</span>
                                    </div>
                                    <div class="searchCount">
                                        <span>搜索次数</span> : <span>${item.SearchTime}</span>
                                    </div>
                                    <div class="fee">
                                        <span>花费金额</span> : <span>${item.Fee}</span>
                                    </div>
                                    <div class="fileCheck">
                                        <span>是否审核</span> : <span>${item.Check == true ? '是' : '否'}</span>
                                    </div>
                                    <div class="userName">
                                        <span>上传用户名</span> : <span>${item.UserName}</span>
                                    </div>
                                    <div class="credentials">
                                        <span>上传的凭证说明</span> : <span>${item.Credentials}</span>
                                    </div>
                                    <div class="status">
                                        <span>文件状态</span> : <span>${item.Stage == 'hot' ? '热存储' : '冷存储'}</span>
                                    </div>
                                </div>
                            </div>
                        `
                        }

                    })
                    $('.fold_panel').html(html)
                },
                error: function () {
                    ShowFailure('网络错误, 请稍后再试 !')
                }
            })
        }
        getUserList()





        // $(".coll_body").eq(0).show();
        // $(".Collapsing").click(function(){
        //     /*$(this).toggleClass("current").siblings('.Collapsing').removeClass("current");//切换图标
        //     $(this).next(".coll_body").slideToggle(500).siblings(".coll_body").slideUp(500);*/
        //     $(this).toggleClass("current").parent('.user_item').siblings('.user_item').children('.Collapsing').removeClass("current");//切换图标
        //     $(this).next(".coll_body").slideToggle(500).parent('.user_item').siblings('.user_item').children('.coll_body').slideUp(500)
        //     if ($(this).hasClass('current')) {
        //         $(this).children('.arrow').attr('src', './images/static/jiantou_down.png')
        //         $(this).parent('.user_item').siblings('.user_item').children('.Collapsing').children('.arrow').attr("src", './images/static/jiantou.png');//切换图标
        //     } else {
        //         $(this).children('.arrow').attr('src', './images/static/jiantou.png')
        //         $(this).parent('.user_item').siblings('.user_item').children('.Collapsing').children('.arrow').attr("src", './images/static/jiantou.png');//切换图标
        //     }
        // });

        $('.fold_panel').on('click', '.Collapsing', function () {
            // 切换图标
            /*
            $(this).toggleClass("current").siblings('.Collapsing').removeClass("current");
            $(this).next(".coll_body").slideToggle(500).siblings(".coll_body").slideUp(500);
            */
            // 切换图标
            $(this).toggleClass("current").parent('.user_item').siblings('.user_item').children('.Collapsing').removeClass("current");
            $(this).next(".coll_body").slideToggle(500).parent('.user_item').siblings('.user_item').children('.coll_body').slideUp(500)
            if ($(this).hasClass('current')) {
                $(this).children('.arrow').attr('src', './images/static/jiantou_down.png')
                $(this).parent('.user_item').siblings('.user_item').children('.Collapsing').children('.arrow').attr("src", './images/static/jiantou.png');//切换图标
            } else {
                $(this).children('.arrow').attr('src', './images/static/jiantou.png')
                $(this).parent('.user_item').siblings('.user_item').children('.Collapsing').children('.arrow').attr("src", './images/static/jiantou.png');//切换图标
            }
        })

    });
</script>
</body>
</html>