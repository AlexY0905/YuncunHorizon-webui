<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8">
	<meta content="耘存科技" http-equiv="keywords">
	<meta name="description" content="耘存科技">
	<meta name="viewport" content="width=device-width,user-scalable=no, initial-scale=1">
	<title>视频详情</title>
	<!-- css -->
	<link rel="stylesheet" type="text/css" href="css/index.css">
	<link rel="stylesheet" type="text/css" href="css/children.css">
	<link rel="stylesheet" type="text/css" href="css/swiper.min.css">
	<link rel="stylesheet" type="text/css" href="css/static/video.css">

	<!-- js -->
	<script type="text/javascript" src="js/jquery-1.11.0.min.js"></script>
	<script type="text/javascript" src="js/swiper.min.js"></script>
	<!-- <script type="text/javascript" src="js/public.js"></script> -->
	<style>
		.audio_wrap {
			width: 100%;
		}
		.music_item {
			position: relative;
			width: 80%;
			line-height: 30px;
			margin: 15px auto;
			background: linear-gradient(45deg, #0083c3, #f2fcfe);
			display: flex;
			justify-content: space-between;
			padding: 0 10px;
			box-sizing: border-box;
			border-radius: 15px;
			box-shadow: 0 2px 2px rgba(10, 16, 20, .24), 0 0 2px rgba(10, 16, 20, .12);
		}

		.music_item .music_date {
			position: absolute;
			right: 60px;
		}

		.field {
			border: 0;
			width: 100%;
			height: 100%;
			padding: 10px 20px;
			background: white;
			border-radius: 3px;
			box-shadow: 0px 8px 15px rgba(75, 72, 72, 0.1);
		}

		#tip { /* 勿删  配合简单提示框用的样式 */
			display: inline-block;
			min-width: 200px;
			height: 40px;
			text-align: center;
			line-height: 40px;
			color: #fff;
			font-size: 14px;
			border-radius: 5px;
		}

		.btn-audio {
			width: 30px;
			height: 30px;
			background: url("./images/static/play.png") no-repeat center bottom;
			background-size: cover;
		}
		.zy_banner {
			width: 100%;
			height: 100px;
			background: transparent;
			display: flex;
			justify-content: center;
			align-items: center;
			font-size: 18px;
			color: 	#0083c3;
		}
	</style>
</head>

<body>
<!-- contentbox -->
<div class="contentbox" style="min-height: 0;background: #f5f5f5;">
	<div class='main' style="position: absolute;padding-top: 1rem">
		<div class='bubble bubble-1'></div>
		<div class='bubble bubble-2'></div>
		<div class='bubble bubble-3'></div>
		<div class='bubble bubble-4'></div>
		<div class='bubble bubble-5'></div>
		<div class='bubble bubble-6'></div>
		<div class='bubble bubble-7'></div>
		<div class='bubble bubble-8'></div>
		<div class='bubble bubble-9'></div>
		<div class='bubble bubble-10'></div>
		<div class='bubble bubble-11'></div>
		<div class='bubble bubble-12'></div>
		<div class='bubble bubble-13'></div>
		<div class='bubble bubble-14'></div>
		<div class='bubble bubble-15'></div>
		<div class='bubble bubble-16'></div>
		<div class='bubble bubble-17'></div>
		<div class='bubble bubble-18'></div>
		<div class='bubble bubble-19'></div>
		<div class='bubble bubble-20'></div>
		<div class='bubble bubble-21'></div>
		<div class='bubble bubble-22'></div>
		<div class='bubble bubble-23'></div>
		<div class='bubble bubble-24'></div>
		<div class='bubble bubble-25'></div>
		<div class='bubble bubble-26'></div>
		<div class='bubble bubble-27'></div>
		<div class='bubble bubble-28'></div>
		<div class='bubble bubble-29'></div>
		<div class='bubble bubble-30'></div>
		<div class="top_bg" style="width: 100%">
			<div class="top_main fix">
				<div class="top_logo">
					<a href="index.html"><img src="images/yclogo.png" /></a>
				</div>
				<div class="top_search">
					<a href="search.html"><span></span></a>
				</div>

			</div>
		</div>
		<!--banner-->
		<div class="zy_banner">
			<h2>———音频中心———</h2>
		</div>
		<!-- 子页content -->
		<div class="zy_content padding_03" style="margin-bottom: 100px">
			<div class="audio_wrap">
				<div class="music_item">
					<!-- <span>音乐1</span><span class="music_date">03:26</span><span class="music_play">播放</span>-->
					<span>音乐1</span><span class="music_date">03:26</span><span class="music_play btn-audio"><audio
						class="mp3Btn" src="./audio/ruguodangshi.mp3"></audio></span>
					<!--
                    <audio src="./audio/ruguodangshi.mp3" controls></audio>
                    -->
				</div>
				<div class="music_item">
					<!-- <span>音乐2</span><span class="music_date">03:26</span><span class="music_play">播放</span>-->
					<span>音乐2</span><span class="music_date">03:26</span><span class="music_play btn-audio"><audio
						class="mp3Btn" src="./audio/ruguodangshi.mp3"></audio></span>
					<!--
                    <audio src="./audio/ruguodangshi.mp3" controls></audio>
                    -->
				</div>
				<div class="music_item">
					<!-- <span>音乐3</span><span class="music_date">03:26</span><span class="music_play">播放</span>-->
					<span>音乐3</span><span class="music_date">03:26</span><span class="music_play btn-audio"><audio
						class="mp3Btn" src="./audio/ruguodangshi.mp3"></audio></span>
					<!--
                    <audio src="./audio/ruguodangshi.mp3" controls></audio>
                    -->
				</div>
			</div>
		</div>
		<!-- footer -->
		<!--
		<div class="footbox" style="background-color: transparent">
			<h2 style="border-bottom: none">
				<a href="about_item.html">公司项目</a>丨<a href="contact.html">联系我们</a>
				<a href="contact.html">联系我们</a>
			</h2>
			<div class="txt">
				<p>CopyRight © 上海耘存科技发展有限公司</p>
				<p>联系地址: 上海市静安区平型关路108创意广场品座37号5楼</p>
			</div>
		</div>
		-->
	</div>
</div>

<!-- slide侧边栏 -->
<div class="side_bar">
	<span class="btn_top"></span>
</div>

<!-- 底部菜单 -->
<div class="menubox">
	<ul class="fix" style="display: flex">
		<li>
			<a href="index.html">
				<i>
					<img src="images/menu_icon01.png" alt="首页" />
					<img src="images/menu_icon01_1.png" alt="首页" />
				</i>
				<span>首页</span>
			</a>
		</li>
<!--		<li>-->
<!--			<a href="quotation.html">-->
<!--				<i>-->
<!--					<img src="images/menu_icon05.png" alt="行情" />-->
<!--&lt;!&ndash;					<img src="images/menu_icon01_1.png" alt="首页" />&ndash;&gt;-->
<!--				</i>-->
<!--				<span>行情</span>-->
<!--			</a>-->
<!--		</li>-->
		<li>
			<a href="video.html">
				<i>
					<img src="images/menu_icon02.png" alt="音频中心" />
					<img src="images/menu_icon02_1.png" alt="音频中心" />
				</i>
				<span>音频中心</span>
			</a>
		</li>
		<li>
			<a href="search.html">
				<i>
					<img src="images/icon_search2.png" alt="搜索" />
					<img src="images/icon_search2.png" alt="搜索" />
				</i>
				<span>搜索</span>
			</a>
		</li>
		<li class="menubtn">
			<i>
				<img src="images/menu_icon04.png" alt="菜单" />
				<img src="images/menu_icon04_1.png" alt="菜单" />
			</i>
			<span>菜单</span>
		</li>
	</ul>
	<!-- 菜单导航 -->
	<span class="menu_panel"></span>
	<!--
    <dl class="menu">
        <dd><a href="login.html">登录</a></dd>
        <dd><a href="register.html">注册</a></dd>
        <dd><a href="video.html">视频中心</a></dd>
        <dd><a href="about.html">关于我们</a></dd>
        <dd><a href="contact.html">联系我们</a></dd>
    </dl>
    -->
</div>
<script>
	$(function () {
		/**
		 * 获取音乐列表
		 */
		function getMusicList() {
			/*
            $.ajax({
                type: "",
                url: '',
                data: {},
                dataType: 'json',
                success: function (result) {
                    console.log(result);

                },
                error: function () {
                    ShowFailure('网络错误, 请稍后再试 !')
                }
            })
            */
			let mp3DataList = [
				{name: 'ruguodangshi', url: './audio/ruguodangshi.mp3'},
				{name: 'KissTheRain', url: './audio/KissTheRain.mp3'},
				{name: 'OneSummerDay', url: './audio/OneSummerDay.mp3'},
				{name: 'Summer', url: './audio/Summer.mp3'},
				{name: 'kanong', url: './audio/kanong.mp3'}
			]
			let html = ''
			mp3DataList.forEach((item, index) => {
				var audioElement = new Audio(item.url); // audio也可获取视频的时长
				var duration
				audioElement.addEventListener("loadedmetadata", function (_event) {
					duration = audioElement.duration;
					// 分钟
					var minute = parseInt(duration / 60);
					// 秒
					var second = Math.round(duration % 60);
					html += `
									<div class="music_item">
										<span>${item.name}</span><span class="music_date">${minute}:${second}</span><span class="music_play btn-audio"><audio class="mp3Btn" src="${item.url}"></audio></span>
									</div>
								`
					$('.audio_wrap').html(html)
				})
			})
		}
		getMusicList()

		/**
		 * 控制音乐播放和暂停
		 */
		var timer = ''
		let cur = ''
		let temp = ''
		let minute = ''
		$('.audio_wrap').on('click', '.music_item .btn-audio', function () {
			event.stopPropagation(); // 防止冒泡
			let audio = $(this).find('audio')[0]
			let $this = $(this)
			console.log(audio);
			if (audio.paused) { // 如果当前是暂停状态
				$(this).css({ 'background': 'url(./images/static/pause.png) no-repeat center bottom', 'background-size': 'cover' });
				timer = setInterval(function () {
					cur = String(audio.currentTime).split('.')[0]
					temp = cur
					minute = parseInt(temp / 60);
					if (cur % 60 < 10) {
						$(audio).parent('.btn-audio').prev().html("" + minute + ":0" + cur % 60 + "")
					} else {
						$(audio).parent('.btn-audio').prev().html("" + minute + ":" + cur % 60 + "")
					}
				}, 1000)
				audio.play(); // 播放
				// 当前音乐如果在播放中, 再点击播放其它音乐时, 就把当前正在播放的音乐暂停, 播放按钮变成 play 状态, 然后播放其它的点击播放的音乐
				$this.parent().siblings('.music_item').find('.mp3Btn').each(function () {
					$(this)[0].pause()
					$(this).parent().css({ 'background': 'url(./images/static/play.png) no-repeat center bottom', 'background-size': 'cover' });
				})
				// 播放完毕
				$(this).children('.mp3Btn').on('ended', function () {
					console.log("音频已播放完成");
					$(this).parent().css({ 'background': 'url(./images/static/play.png) no-repeat center bottom', 'background-size': 'cover' });
				})
				return;
			} else { // 当前是播放状态
				$(this).css({ 'background': 'url(./images/static/play.png) no-repeat center bottom', 'background-size': 'cover' });
				clearInterval(timer)
				audio.pause(); // 暂停
			}
		})

		/**
		 * 加载底部菜单选项
		 */
		$('.menu_panel').load('./common/menu.html')
	})
</script>
</body>

</html>